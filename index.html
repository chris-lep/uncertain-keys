<!DOCTYPE html>
<!--
Copyright (c) 2026 Christopher Lepenik

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, version 3.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <https://www.gnu.org/licenses/>.
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uncertain Keys Synth</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <div class="overlay" id="overlay">
        <h1>Click to Start Synthesizer</h1>
        <p>Use your keyboard (A-L) to play</p>
    </div>

    <div class="synth-case">
        <div class="synth-header">
            <h2>Uncertain Keys Synth</h2>
            <div class="config-group">
                <label for="layout" class="sr-only">Layout:</label>
                <select id="layout">
                    <option value="US">US</option>
                    <option value="DE">DE</option>
                </select>
                <button id="aboutBtn" class="about-btn" type="button" aria-haspopup="dialog" aria-controls="aboutModal">
                    About
                </button>
            </div>
        </div>
        
        <div class="controls-row">
            <div class="control-group">
                <label>Waveform</label>
                <select id="waveform">
                    <option value="sine">Sine</option>
                    <option value="triangle">Triangle</option>
                    <option value="square">Square</option>
                    <option value="sawtooth">Sawtooth</option>
                </select>
            </div>

            <div class="control-group">
                <label>Filter Cutoff (Hz)</label>
                <input type="range" id="cutoff" min="100" max="20000" value="20000" step="10">
                <span id="cutoffVal" style="font-size:12px; color:#ff9d00">20000</span>
            </div>

            <div class="control-group">
                <label>Pitch Instability (Cents)</label>
                <input type="range" id="variance" min="0" max="100" value="0" step="1">
                <span id="varianceVal" style="font-size:12px; color:#ff9d00">0</span>
            </div>

            <div class="control-group">
                <label>Octave Shift</label>
                <div style="display: flex; align-items: center; gap: 10px; margin-top: 5px;">
                    <button id="octaveDown" class="octave-btn">−</button>
                    <span id="octaveVal" style="font-size:14px; color:#ff9d00; min-width: 20px; text-align: center; font-weight: bold;">0</span>
                    <button id="octaveUp" class="octave-btn">+</button>
                </div>
            </div>
        </div>

        <div class="controls-row">
            <div class="control-group">
                <label id="driftModeLabel" for="driftMode">Drift Distribution</label>
                <div class="toggle-switch" role="group" aria-labelledby="driftModeLabel">
                    <span class="toggle-label toggle-label-active" id="driftModeLabelGaussian">Gaussian</span>
                    <input type="checkbox" id="driftMode" role="switch" aria-labelledby="driftModeLabel driftModeLabelGaussian driftModeLabelUniform">
                    <span class="toggle-label" id="driftModeLabelUniform">Uniform</span>
                </div>
            </div>

            <div class="control-group">
                <label>Drift Direction (% Up)</label>
                <input type="range" id="driftDirection" min="0" max="100" value="50" step="1">
                <span id="driftDirectionVal" style="font-size:12px; color:#ff9d00">50%</span>
            </div>
            
            <div class="control-group">
                <label id="driftMeanLabel">Mean Drift Speed (cts/s)</label>
                <input type="range" id="driftMean" min="0" max="200" value="0" step="0.1">
                <span id="driftMeanVal" style="font-size:12px; color:#ff9d00">0</span>
            </div>

            <div class="control-group">
                <label id="driftSpreadLabel">Drift Spread (cts/s)</label>
                <input type="range" id="driftSpread" min="0" max="100" value="0" step="0.1">
                <span id="driftSpreadVal" style="font-size:12px; color:#ff9d00">0</span>
            </div>
        </div>

        <div class="piano-container" id="piano">
            </div>
    </div>

    <div class="about-modal" id="aboutModal" aria-hidden="true" role="dialog" aria-labelledby="aboutTitle">
        <div class="about-content" role="document">
            <button class="about-close" id="aboutClose" type="button" aria-label="Close About dialog">×</button>
            <h3 id="aboutTitle">About Uncertain Keys Synth</h3>
            <p><strong>Version:</strong> 2.2.1</p>
            <p>
                Uncertain Keys Synth explores pitch uncertainty and drift in a playable web-based instrument.
                Each note is sampled from a Gaussian distribution and can glide over time with randomized speed and direction.
            </p>
            <h4>Attribution</h4>
            <p>
                If you use this instrument in a musical recording, performance, research, or other academic or artistic work,
                attribution is appreciated.
            </p>
            <p class="about-quote">
                Instrument: Uncertain Keys Synthesizer<br>
                Created by Christopher Lepenik<br>
                Source: https://github.com/chris-lep/uncertain-keys
            </p>
            <h4>License</h4>
            <p>
                Copyright (c) 2026 Christopher Lepenik.
                Licensed under GNU GPL v3.0 only (GPL-3.0-only).
                This software is provided without warranty. See LICENSE for details.
            </p>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
